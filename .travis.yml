language: python
matrix:
  include:
  - python: '3.5'
    dist: xenial
    sudo: false
  - python: '3.6'
    dist: xenial
    sudo: false
  - python: '3.7'
    dist: xenial
    sudo: true
  - python: pypy3
  allow_failures:
    - python: pypy3

cache: pip
before_install:
  - chmod +x scripts/run.sh

install:
  - pip install codecov

script:
   - "./scripts/run.sh"

after_success:
  - rm tests/coverage.xml && mv tests/.coverage ./ && codecov
